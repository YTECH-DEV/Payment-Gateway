<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="./cdn/style.css">
    <script type="module" src="./cdn/main.js"></script>
</head>
<body>
<button class="payment_btn"></button>
<button class="payment_btn btn_outlined"></button>
<button class="payment_btn btn_filled"></button>
<button class="payment_btn btn_icon"></button>



</body>
</html>

<script>
document.querySelectorAll('.payment_btn').forEach((item) => {
    item.addEventListener('click', async() =>
    {
        // Check if modal already exists
        if (document.querySelector('.modal-overlay'))
        {
            document.querySelector('.modal-overlay').remove();
        }

        try
        {
            // Fetch the form HTML
            const response = await fetch('./cdn/modal.html');
            const html = await response.text();

            // Create modal overlay
            const modal_overlay = document.createElement('div');
            modal_overlay.className = 'modal-overlay';
            modal_overlay.innerHTML = html;

            document.body.appendChild(modal_overlay);

            // Close button functionality
            const closeBtn = modal_overlay.querySelector('.close_modal');
            closeBtn.addEventListener('click', () => {
                modal_overlay.remove();
            });

            // Close on overlay click (not modal content)
            modal_overlay.addEventListener('click', (e) => {
                if (e.target === modal_overlay) {
                    modal_overlay.remove();
                }
            });

            // Prevent form submission from refreshing page
            const form = modal_overlay.querySelector('form');
            form.addEventListener('submit', (e) => {
                e.preventDefault();
            });

            // Initialize form validation
            initFormValidation();

        }
        catch (error)
        {
            console.error('Error loading modal:', error);
        }


    })
})
</script>
